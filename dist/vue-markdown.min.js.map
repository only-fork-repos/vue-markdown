{"version":3,"sources":["vue-markdown.js"],"names":["defaultData","previewMode","previewHtml","buttons","title","type","icon","defaultCallbacks","header","vm","replaceSelection","selection","getSelection","setSelection","end","bold","italic","link","url","prompt","start","quote-left","code","list-ol","list-ul","image","VueMarkdown","marked","options","markdown","this","data","width","height","text","buttonCallbacks","addButton","button","callback","push","install","Vue","component","props","template","methods","$$","textarea","selectionStart","selectionEnd","content","val","value","substring","length","focus","action","ready","$watch","exports","module","define","amd","window"],"mappings":"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","file":"vue-markdown.min.js","sourcesContent":["/**\n * Vue Markdown 1.0.0\n * 2015/6/3 Peak Tai\n * https://github.com/PeakTai/vue-markdown.git\n */\n(function () {\n    \"user strict\"\n    function defaultData() {\n        return {\n            previewMode: false,\n            previewHtml: \"\",\n            buttons: [\n                {title: \"标题\", type: \"header\", icon: \"fa fa-header\"},\n                {title: \"加粗\", type: \"bold\", icon: \"fa fa-bold\"},\n                {title: \"斜体\", type: \"italic\", icon: \"fa fa-italic\"},\n                {title: \"超连接\", type: \"link\", icon: \"fa fa-link\"},\n                {title: \"引用\", type: \"quote-left\", icon: \"fa fa-quote-left\"},\n                {title: \"代码\", type: \"code\", icon: \"fa fa-code\"},\n                {title: \"有序列表\", type: \"list-ol\", icon: \"fa fa-list-ol\"},\n                {title: \"无序列表\", type: \"list-ul\", icon: \"fa fa-list-ul\"},\n                {title: \"网络图片\", type: \"image\", icon: \"fa fa-image\"}\n            ]\n        }\n    }\n\n    function defaultCallbacks() {\n        return {\n            header: function (vm) {\n                vm.replaceSelection(\"### \")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end, selection.end)\n            },\n            bold: function (vm) {\n                vm.replaceSelection(\" ****\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end - 2, selection.end - 2)\n            },\n            italic: function (vm) {\n                vm.replaceSelection(\" **\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end - 1, selection.end - 1)\n            },\n            link: function (vm) {\n                var url = prompt(\"请输入链接地地址\")\n                if (!url) {\n                    return\n                }\n                vm.replaceSelection(\"[链接描述](\" + url + \")\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.start + 1, selection.start + 5)\n            },\n            \"quote-left\": function (vm) {\n                vm.replaceSelection(\" >\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end, selection.end)\n            },\n            \"code\": function (vm) {\n                vm.replaceSelection(\"``````\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end - 3, selection.end - 3)\n            },\n            \"list-ol\": function (vm) {\n                vm.replaceSelection(\"1. \")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end, selection.end)\n            },\n            \"list-ul\": function (vm) {\n                vm.replaceSelection(\"* \")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.end, selection.end)\n            },\n            \"image\": function (vm) {\n                var url = prompt(\"请输入图片的地址\")\n                if (!url) {\n                    return\n                }\n                vm.replaceSelection(\"![图片说明](\" + url + \")\")\n                var selection = vm.getSelection()\n                vm.setSelection(selection.start + 2, selection.start + 6)\n\n            }\n        }\n    }\n\n\n    var VueMarkdown = function (marked, options) {\n        var markdown = this\n        options = options || {}\n        markdown.data = defaultData()\n        markdown.data.width = options.width || \"100%\"\n        markdown.data.height = options.height || \"300px\"\n        markdown.data.text = options.text || \"# Vue Markdown Editor\"\n\n        markdown.buttonCallbacks = defaultCallbacks();\n\n        /**\n         * add a button\n         * @param button {title,String,type:String,icon:String,callback:Function}\n         */\n        markdown.addButton = function (button) {\n            if (!button.type) {\n                throw \"button must has a 'type' property\"\n            }\n            if (markdown.buttonCallbacks[button.type]) {\n                throw \"the type of button is already in use\"\n            }\n            markdown.buttonCallbacks[button.type] = button.callback\n            delete button.callback\n            markdown.data.buttons.push(button)\n        }\n\n        //Vue.use(instance)\n        markdown.install = function (Vue) {\n            Vue.component(\"md-editor\", {\n                props: [\"width\", \"height\", \"text\"],\n                template: \"<style>\\n    .md-editor {\\n        padding: 40px 10px 10px 10px;\\n        position: relative;\\n        border: 1px solid #ddd;\\n        border-radius: 4px;\\n        -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\\n        box-shadow: 0 1px 1px rgba(0, 0, 0, .05);\\n    }\\n\\n    .md-editor textarea {\\n        border: none;\\n        resize: vertical;\\n        outline: none;\\n        padding: 0;\\n    }\\n\\n    .md-editor textarea {\\n        width: 100%;\\n    }\\n\\n    .md-editor .md-preview {\\n        overflow-y: auto;\\n    }\\n\\n    .md-editor .md-toolbar {\\n        position: absolute;\\n        top: 0;\\n        left: 0;\\n        width: 100%;\\n        height: 32px;\\n        border-bottom: 1px solid #ddd;\\n        overflow-x: auto;\\n    }\\n\\n    .md-toolbar .button {\\n        line-height: 32px;\\n        width: 32px;\\n        text-align: center;\\n        cursor: pointer;\\n    }\\n</style>\\n<div class=\\\"md-editor\\\" v-style=\\\"width:width\\\">\\n    <div class=\\\"md-toolbar\\\">\\n        <span class=\\\"button {{icon}}\\\" v-repeat=\\\"buttons\\\" title=\\\"{{title}}\\\" v-on=\\\"click:action(type)\\\"></span>\\n        <span class=\\\"button fa\\\" v-class=\\\"'fa-eye':previewMode,'fa-eye-slash':!previewMode\\\"\\n              v-on=\\\"click:previewMode=!previewMode\\\"></span>\\n    </div>\\n    <textarea v-model=\\\"text\\\" v-el=\\\"textarea\\\" v-show=\\\"!previewMode\\\" v-style=\\\"height:height\\\"></textarea>\\n\\n    <div class=\\\"md-preview\\\" v-show=\\\"previewMode\\\">{{{previewHtml}}}</div>\\n</div>\\n<content></content>\",\n                data: function () {\n                    return markdown.data\n                },\n                methods: {\n                    getSelection: function () {\n                        return {\n                            start: this.$$.textarea.selectionStart,\n                            end: this.$$.textarea.selectionEnd\n                        }\n                    },\n                    setSelection: function (start, end) {\n                        this.$$.textarea.selectionStart = start\n                        this.$$.textarea.selectionEnd = end\n                    },\n                    replaceSelection: function (content) {\n                        var selection = this.getSelection()\n                        val = this.$$.textarea.value\n                        var val = this.text.substring(0, selection.start) + content + this.text.substring(selection.end)\n                        this.$$.textarea.value = this.text = val\n                        this.setSelection(selection.start, selection.start + content.length)\n                        this.$$.textarea.focus()\n                    },\n                    //trigger by click button\n                    action: function (type) {\n                        if (this.previewMode) {\n                            return\n                        }\n                        var callback = markdown.buttonCallbacks[type]\n                        callback && callback(this)\n                    }\n                },\n                ready: function () {\n                    var vm = this;\n                    vm.previewHtml = marked(vm.text)\n                    this.$watch(\"text\", function (val) {\n                        vm.previewHtml = marked(val)\n                    })\n                }\n            })\n        }\n    }\n    if (typeof exports == \"object\") {\n        module.exports = VueMarkdown;\n    } else if (typeof define == \"function\" && define.amd) {\n        define([], function () {\n            return VueMarkdown\n        })\n    } else if (window) {\n        window.VueMarkdown = VueMarkdown\n    }\n})()"],"sourceRoot":"/source/"}